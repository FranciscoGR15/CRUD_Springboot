<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>GetAll</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    </head>
    <body>

        <div class="container">

            <div class="row mt-5">

                <div class="col-12 col-sm-6">
                    <p class="h3 text-primary">Usuario</p>
                </div>

                <div class="col-12 col-sm-6 col-lg-6 d-sm-flex justify-content-sm-end">
                    <a type="button" class="btn btn-primary" th:href="@{/usuario/form}"><i class="bi bi-plus-lg"></i> Agregar</a>
                </div>

            </div>

            <div class="table-responsive">

                <div class="mt-5">

                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th>Informacion Personal</th>
                                <th>Informacion de Contacto</th>
                                <th>Direccion</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                        <tbody>
                            <tr th:each="usuario : ${usuarios}">
                                <td>
                                    <span th:text="${usuario.Nombre} + ' ' + ${usuario.apellidoPaterno} + ' ' + ${usuario.apellidoMaterno}"></span> <br>
                                    <p>
                                        <strong>Usuario:</strong> <span th:text="${usuario.userName}"></span>
                                    </p>
                                    <br>

                                    <small th:text="'CURP: ' + ${usuario?.CURP ?: 'NO REGISTRADO'}"></small> <br>
                                    <small th:text="'Fecha: ' + ${usuario.FechaNacimiento}"></small> <br>
                                    <small th:text="'Sexo: ' + ${usuario.sexo}"></small> <br>
                                    <small th:text="'Rol: ' + ${usuario.rol.nombreRol}"></small>
                                </td>
                                <td>
                                    <small th:text="'Correo: ' + ${usuario.email}"></small> <br>
                                    <small th:text="'Telefono: ' + ${usuario.telefono}"></small> <br>
                                    <small th:text="'Celular: ' + ${usuario.celular}"></small>
                                </td>                                
                                <td>
                                    <ul th:each="dir : ${usuario.direcciones}">
                                        <li>
                                            <span th:text="${dir.calle} + ' N: ' + ${dir?.numeroInterior ?: 'Sin numero'} + ' #' + ${dir.numeroExterior} + ', ' + 
                                                  ${dir.colonia?.nombreColonia ?: 'Sin Colonia'} + ', ' + 
                                                  ${dir.colonia?.municipio?.nombreMunicipio ?: 'Sin Municipio'} + ', ' + 
                                                  ${dir.colonia?.municipio?.estado?.nombreEstado ?: 'Sin Estado'}">
                                            </span>
                                        </li>
                                    </ul>
                                </td>
                                <td>
                                    <a class="btn btn-warning" th:href="@{/usuario/form/{id}(id=${usuario.IdUsuario})}"><i class="bi bi-pencil-square"></i></a>
                                    <button class="btn btn-danger"><i class="bi bi-trash-fill"></i></button>
                                </td>
                            </tr>
                        </tbody>
                        </tbody>
                    </table>

                </div>

            </div>

        </div>

    </body>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</html>
